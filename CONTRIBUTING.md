# How to develop

This assumes both Python and Rust are already setup.

The project uses [`maturin`](https://pypi.org/project/maturin/) to build Rust-based Python packages.
To build and install those packages locally for development,

```sh
# Use `pipenv` for dependency management.
pip install pipenv
make setup
```

All the packages will be installed in the environment:

```sh
$ pipenv run pip list | grep perde
perde              0.1.0
perde-json         0.1.0
perde-msgpack      0.1.0
perde-yaml         0.1.0
```

# Layout

* `perde-core`: The Rust library that wraps `serde` to be used in Python.
* `perde`: The Python package to provide common helper methods for `perde`. They're typically to attributes for data structures (`flattening`, `skip serialization` etc.)
* `perde-<format>`: The Python package which supports a specific format using `perde-core`.
* `manifests-gen`: To generate `Cargo.toml` and `pyproject.toml` for each Python project.

# Manifests

`Cargo.toml` and `pyproject.toml` in each project are generated by `manifests-gen`. The configuration is at `manifests-gen/manifests.yml`.
To regenerate them,

```sh
make manifests
```
